<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Cartas Individuales |Luzzzen Cards</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>


<body>

  <header>
    <a href="index.html" class="btn-volver">‚Üê Volver al inicio</a>
    <h1>Cartas individuales</h1>
    <p>Cartas de f√∫tbol disponibles</p>
  </header>

  <main>

    <section id="productos">

      <div class="catalogo">

        <!-- CARTA 1 -->
        <div class="carta">
          <div class="imagenes-carta">
          <img src="imagenes/HazardPruebaFront.jpg" alt="Hazard ejemplo adelante">
          <img src="imagenes/HazardPruebaBack.jpg" alt="Hazard ejemplo atras">
        </div>
  <h4 class="titulo-carta">
    Hazard - Chelsea ‚Äì Panini WCCF 2016
  </h4>
  <p class="precio">$7.500</p>
  <button class="agregar">Agregar al pedido</button>
</div>

        <!-- CARTA 2 -->
        <div class="carta">
          <div class="imagenes-carta">
          <img src="imagenes/HazardPruebaFront.jpg" alt="Hazard ejemplo adelante">
          <img src="imagenes/HazardPruebaBack.jpg" alt="Hazard ejemplo atras">
        </div>
  <h4 class="titulo-carta">
    Didier Drogba ‚Äì Panini Colecci√≥n 2016
  </h4>
  <p class="precio">$5.000</p>
  <button class="agregar">Agregar al pedido</button>
</div>

      </div>
    </section>

    <!-- PEDIDO -->
   <section id="pedido">
  <h2>Tu pedido</h2>
  <ul id="lista-pedido"></ul>
  <p id="total">Total: $0</p>

  <button id="vaciar">Vaciar pedido</button>
  <button id="whatsapp">Enviar pedido por WhatsApp</button>
</section>

<div class="volver-footer">
  <a href="index.html" class="btn-volver">‚Üê Volver al inicio</a>
</div>
    
  </main>

  <div id="modal" class="modal">
  <button class="flecha izquierda">‚Äπ</button>
  <img id="modal-img">
  <button class="flecha derecha">‚Ä∫</button>
</div>

<!-- Carrito flotante -->
<button id="carrito-float">
  üõí
  <span id="carrito-badge">0</span>
</button>
  
<script>
/* =========================
   VARIABLES BASE
========================= */

const botonesAgregar = document.querySelectorAll(".agregar");
const listaPedido = document.getElementById("lista-pedido");
const totalTexto = document.getElementById("total");
const botonWhatsapp = document.getElementById("whatsapp");
const botonVaciar = document.getElementById("vaciar");

const carritoFloat = document.getElementById("carrito-float");
const carritoBadge = document.getElementById("carrito-badge");

let items = [];
let total = 0;

/* =========================
   CARRITO
========================= */

botonesAgregar.forEach(boton => {
  boton.addEventListener("click", () => {
    const carta = boton.closest(".carta");
    const nombre = carta.querySelector(".titulo-carta").innerText;
    const precioTexto = carta.querySelector(".precio").innerText;
    const precio = parseInt(precioTexto.replace(/\D/g, ""));

    // Evitar duplicados
    if (items.some(item => item.nombre === nombre)) {
      alert("Esta carta ya est√° en tu pedido.");
      return;
    }

    items.push({ nombre, precio });

    const li = document.createElement("li");
    li.innerHTML = `
      ${nombre} ‚Äì ${precioTexto}
      <button class="eliminar">‚úï</button>
    `;

    li.querySelector(".eliminar").addEventListener("click", () => {
      listaPedido.removeChild(li);
      items = items.filter(i => i.nombre !== nombre);
      total -= precio;
      actualizarTotal();
      actualizarCarritoFloat();
    });

    listaPedido.appendChild(li);
    total += precio;
    actualizarTotal();
    actualizarCarritoFloat();
  });
});

botonVaciar.addEventListener("click", () => {
  listaPedido.innerHTML = "";
  items = [];
  total = 0;
  actualizarTotal();
  actualizarCarritoFloat();
});

function actualizarTotal() {
  totalTexto.innerText = `Total: $${total.toLocaleString()}`;
}

/* =========================
   WHATSAPP
========================= */

botonWhatsapp.addEventListener("click", () => {
  if (items.length === 0) {
    alert("No agregaste ninguna carta.");
    return;
  }

  const fecha = new Date();
  const codigo = `LZ-${fecha.getFullYear()}${fecha.getMonth()+1}${fecha.getDate()}-${Math.floor(Math.random()*1000)}`;

  let mensaje = `Pedido ${codigo}%0A%0A`;

  items.forEach(item => {
    mensaje += `‚Ä¢ ${item.nombre} - $${item.precio.toLocaleString()}%0A`;
  });

  mensaje += `%0A Total: $${total.toLocaleString()}`;

  window.open(`https://wa.me/5491125608635?text=${mensaje}`, "_blank");
});

/* =========================
   CARRITO FLOTANTE
========================= */

function actualizarCarritoFloat() {
  carritoBadge.innerText = items.length;

  if (items.length === 0) {
    carritoFloat.style.display = "none";
  } else {
    carritoFloat.style.display = "flex";
  }
}

carritoFloat.addEventListener("click", () => {
  document.getElementById("pedido").scrollIntoView({
    behavior: "smooth"
  });
});

actualizarCarritoFloat();

<!-- Overlay -->
<div id="drawer-overlay"></div>

<!-- Drawer carrito -->
<aside id="drawer-carrito">
  <header class="drawer-header">
    <h3>Tu pedido</h3>
    <button id="cerrar-drawer">‚úï</button>
  </header>

  <ul id="drawer-lista"></ul>

  <div class="drawer-footer">
    <p id="drawer-total">Total: $0</p>
    <button id="drawer-whatsapp">Enviar pedido por WhatsApp</button>
  </div>
</aside>
  
/* =========================
   MODAL DE IM√ÅGENES
========================= */

const modal = document.getElementById("modal");
const modalImg = document.getElementById("modal-img");
const flechaIzq = document.querySelector(".flecha.izquierda");
const flechaDer = document.querySelector(".flecha.derecha");

let imagenes = [];
let indice = 0;

document.querySelectorAll(".imagenes-carta").forEach(contenedor => {
  contenedor.addEventListener("click", e => {
    e.stopPropagation();

    imagenes = [...contenedor.querySelectorAll("img")];
    indice = 0;

    modalImg.src = imagenes[indice].src;
    modal.style.display = "flex";

    if (imagenes.length > 1) {
      flechaIzq.style.display = "block";
      flechaDer.style.display = "block";
    } else {
      flechaIzq.style.display = "none";
      flechaDer.style.display = "none";
    }
  });
});

flechaDer.addEventListener("click", e => {
  e.stopPropagation();
  indice = (indice + 1) % imagenes.length;
  modalImg.src = imagenes[indice].src;
});

flechaIzq.addEventListener("click", e => {
  e.stopPropagation();
  indice = (indice - 1 + imagenes.length) % imagenes.length;
  modalImg.src = imagenes[indice].src;
});

modal.addEventListener("click", () => {
  modal.style.display = "none";
});

/* =========================
   SWIPE MOBILE
========================= */

let touchStartX = 0;
let touchEndX = 0;

modalImg.addEventListener("touchstart", e => {
  touchStartX = e.changedTouches[0].screenX;
});

modalImg.addEventListener("touchend", e => {
  touchEndX = e.changedTouches[0].screenX;
  const diff = touchStartX - touchEndX;

  if (diff > 50 && imagenes.length > 1) {
    indice = (indice + 1) % imagenes.length;
    modalImg.src = imagenes[indice].src;
  }

  if (diff < -50 && imagenes.length > 1) {
    indice = (indice - 1 + imagenes.length) % imagenes.length;
    modalImg.src = imagenes[indice].src;
  }
});
</script>

</body>
</html>
